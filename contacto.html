<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>T-HardIA — Contacto</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="page">
  <header class="site-header">
    <div class="logo">T-HardIA</div>
    <nav class="nav">
      <a href="index.html">Iniciar</a>
      <a href="register.html">Registro</a>
      <a href="blog.html">Blog</a>
      <a href="compare.html">Comparar</a>
      <a href="contact.html" class="active">Contacto</a>
    </nav>
  </header>

  <main class="center-card">
    <section class="card">
      <h1>Contacto / Encuesta</h1>
      <form id="contact-form" class="form">
        <label>Nombre</label>
        <input id="nombre" required />
        <label>Correo</label>
        <input id="email" type="email" required />
        <label>¿Qué opinas del diseño?</label>
        <textarea id="opinion" rows="3"></textarea>
        <label>¿Qué contenido te gustaría ver?</label>
        <textarea id="contenido" rows="3"></textarea>
        <label>Componente de interés</label>
        <input id="hardware" />
        <label>Satisfacción</label>
        <select id="satisfaccion"><option value="">Selecciona...</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
        <label>¿Recomendarías?</label>
        <select id="recomendacion"><option value="">Selecciona...</option><option>si</option><option>talvez</option><option>no</option></select>

        <button type="submit" class="btn">Enviar</button>
        <p id="contact-msg" class="muted" style="margin-top:10px"></p>
      </form>
    </section>
  </main>

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script src="app.js"></script>
  <script>
    document.getElementById('contact-form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const data = {
        nombre: document.getElementById('nombre').value.trim(),
        email: document.getElementById('email').value.trim(),
        opinion: document.getElementById('opinion').value.trim(),
        contenido: document.getElementById('contenido').value.trim(),
        hardware: document.getElementById('hardware').value.trim(),
        satisfaccion: document.getElementById('satisfaccion').value,
        recomendacion: document.getElementById('recomendacion').value,
        uid: (window.appCurrentUser() || {}).uid || null
      };
      const res = await window.appSaveContact(data);
      const msg = document.getElementById('contact-msg');
      if (res.success) { msg.textContent = '✅ Enviado correctamente.'; e.target.reset(); } 
      else { msg.textContent = '❌ Error: ' + res.error; }
    });
  </script>
</body>
</html>
